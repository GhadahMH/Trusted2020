<!DOCTYPE html>
<html> 
    <head>
      <script src="https://www.gstatic.com/firebasejs/7.8.0/firebase-app.js"></script>
      <script src="https://www.gstatic.com/firebasejs/7.8.0/firebase-auth.js"></script>
      <script src="https://www.gstatic.com/firebasejs/7.8.0/firebase-database.js"></script>
      <script src="https://www.gstatic.com/firebasejs/7.8.0/firebase-storage.js"></script>
        <meta charset="utf-8">
        <title>Property Owner Dashboard</title>
        <style type="text/css">
        
         p {
      margin: 0px;
    }
    h1 {
      margin: 0px;
    }
    h2 {
      margin: 0px;
    }
    h3 {
      margin: 0px;
    }
      html, body {
      width: 100%;
      height: 100%;
      margin: 0px;
    }
    body {
      background-color: transparent;
      transform: perspective(1400px) matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1);
      transform-style: preserve-3d;
    }
    .webLogo {
      position: absolute;
      top: 0%;
      left: 0%;
      transform-style: preserve-3d;
      transform: translate3d(1px, -1px, 0px);
      width: 8%;
      height: 16%;
    }
    .tr1 {
      left: 0px;
      top: 0px;
    }   
        
     .tr1.home1 {
      display: block;
      position: absolute;
      box-sizing: content-box;
      transform: rotate(0deg);
      transform-origin: center center;
      opacity: 1;
      cursor: default;
      margin: 0px;
      padding: 0px;
      overflow: auto;
      background-color: rgb(255, 255, 255);
      width: 100%;
      height: 100%;
      left: 0px;
      top: 0px;
    }
    nav {
      position: absolute;
      z-index: 9999;
      top: 45px;
      left: 0px;
      width: 100%;
      height: 10px;
      margin: 0px;
      padding: 0px;
    }
    nav ul {
      list-style: none;
      padding: 0px;
      float: right;
    }
    nav ul li {
      display: inline-block;
      margin: 0px;
      padding: 0.2em 0.7em;
      top: -1px;
      left: -10px;
    }
    nav a {
      width: 100%;
      height: 100%;
      color: black;
      text-decoration: none;
      font-family: American-typewriter;
      font-size: 45px;
      font-weight: lighter;
      letter-spacing: 1px;
      transition: all 0.25s ease-in-out 0s;
    }
    nav a:hover {
      color: rgb(217, 199, 241);
    }  
            .Plogo{
             height: 15%;
            width:10%;
            position: absolute;
            top:40%;
            left:5.5%;
            
            }
            #pNameLabel{
                text-align: center;
                font-size: 45px;
                font-style: bold;
                position: absolute;
                top:31%;
                left: 10%;
            }
            #pReviews{
                text-align: center;
                font-size: 35px;
                position: absolute;
                top:38.5%;
                left: 17%;
            }
            .star2{
                position: absolute;
                top:42%;
                left: 16.3%;
                height: 4%;
                width: 2%;
            }
            #stars{
                position:absolute;
                top:42%;
                left:19%;
                font-size: 35px;
            }
            #editBtn{
                height: 3%;
                width:5%;
                position:absolute;
                top:50%;
                left:34%;
                box-shadow: 0px;
                font-size: 25px;
                background-color: rgb(217,199,241);
                border-radius: 10px;
                border: none;
                
            }
            #delete{
                height: 3%;
                width:5%;
                position:absolute;
                top:50%;
                left:41%;
                box-shadow: 0px;
                font-size: 25px;
                background-color: rgb(217,199,241);
                border-radius: 10px;
                border: none;
            }
            #viewAll{
                 height: 3%;
                width:7%;
                position:absolute;
                top:60%;
                left:19%;
                box-shadow: 0px;
                font-size: 25px;
                background-color: rgb(217,199,241);
                border-radius: 10px;
                border: none;
            }
            #Add{
                  height: 3%;
                width:7%;
                position:absolute;
                top:60%;
                left:27%;
                box-shadow: 0px;
                font-size: 25px;
                background-color: rgb(217,199,241);
                border-radius: 10px;
                border: none;
            }
            #latest{
                font-size: 45px;
                text-align: center;
                color: black;
                
                position: absolute;
                top:40%;
                left:71%;
            }
            #viewNotification{
                position: absolute;
                top:90%;
                left:73%;
                height: 3%;
                width:7%;
                 box-shadow: 0px;
                font-size: 30px;
                background-color: rgb(217,199,241);
                border-radius: 10px;
                border: none;
            }
            #notification1{
                position: absolute;
                top:47%;
                left:65%;
                font-size: 35px;
                color: black;
            }
             #notification2{
                position: absolute;
                top:68%;
                left:65%;
                font-size: 35px;
                color: black;
            }
            #viewBC{
               position: absolute;
                top:90%;
                left:25%;
                 height: 5%;
                width:7%;
                 box-shadow: 0px;
                font-size: 30px;
                background-color: rgb(217,199,241);
                border-radius: 10px;
                border: none;
            }
        </style>

        <style>
          .continer{
            width: 90%;
            min-height: 100%;
            margin: 0 auto;
            
            border: 10px solid rgb(48, 0, 149);    
            border-radius: 15px ;

          }
          .insideContener{
            
            width: 99.7%;
            height:99.7% ;
            border: 3px solid #000;
            border-radius: 5px ;
            display: flex;
          }
          .manegPrp{
            width: 60%;
          }
          .manegPrp-inside{
           margin: 2% 2%;
            width: 96%;
            height: auto ;
            border: 3px solid #000;
            border-radius: 15px ;
            padding: 1%;
          }
          .single-prp-inside{
            width: 95%;
            height: 50%;
            margin: 2% auto;
            border: 3px solid rgb(156, 156, 156);
            border-radius: 15px ;
            padding: 1%;
            display: flex;
 
          }
          button{
            box-shadow: 0px;
            font-size: 30px;
            background-color: rgb(217,199,241);
            border-radius: 10px;
            border: none;
            margin: auto 1%;
            padding: 10px;
          }
          P{
            margin: 1%;
            font-size: 45px;
                font-style: bold;
          }
          
          .text-inside{
            font-size: 25px;
            margin: 1%;
          }
          .vertical_div{
            width: 30%;
            margin: auto 1%;
          }
          .Latest-Reviews{
            margin: auto 2%;
            width: 40%;
            border: 3px solid #000;
            border-radius: 15px ;
            padding: auto;
            text-align: center;
          }
          .singleReviews{
            border: 3px solid rgb(156, 156, 156);
            border-radius: 15px ;
            margin: 2% auto;
            width:90%;
            padding: 1%;
          }
          .text-review{
            color: rgb(117, 117, 117);
            font-size: 20px;
            text-align: left;
            
          }
          .header{
            display: flex;
            width: 100%;
          }
          .nav{
            margin: auto 0;
            margin-left: 50%;
            display: flex;
          }
          .header a{
            text-decoration: none;
            display: block;
            padding: 10px;
            margin: 5px;
            color:#000;
          }

        </style>
    </head>
   <body> 
    <div class="header">
      <img src="logo.png" style="width: 100px;height:100px;margin:20px"/>
      <div class="nav">
        <a href="HomePage2.html">Home</a>
        <a href="HolidayHomes.html">Holiday Homes</a>
        <a href="POregisteration.html">Owner Register</a>
        <a href="Memberregisteration.html">Member Register</a>
        <a id="signin" href="Login.html">Sign In</a>
        <a id="signout" href="#" onclick="logout()">Sign Out</a>
      </div>
      
    </div>
        <!-- Frame/Body-->

<div class="continer">
  <div class="insideContener"> 
     <div class="manegPrp">
      <p>Manage Properties</p> 
      <div id="prp-list" class="manegPrp-inside">
        

        
        
      </div>
      <div style="text-align: center; margin :1%;">
        <button>All Properties</button>
        <button onclick="addprp()">Add Properties</a>
      </div>
     </div>
     <div class="Latest-Reviews">
     <div style="margin: 2%;">
      <p>Latest Reviews</p>
      <div id="ReviewList">
        
      </div>
      
      <button>View All</button>

     </div>
      
    </div>
  </div>
</div>

      <!-- <div class="frame">
        <svg width="2550" height="1350" class="gwd-svg-j0fp">
          <rect x="0" y="200" rx="10" ry="10" width="2550" height="1175" style="fill: rgb(48, 0, 149); z-index: 10;"></rect>
          <rect x="21" y="240" rx="10" ry="10" width="2500" height="1100" style="fill: rgb(255,255,255); stroke-linecap: butt; z-index: 20;"></rect>
            
          <rect x="80" y="380" rx="10" ry="10" width="1205" height="500"
                       style="fill: rgb(255,255,255); z-index: 30; stroke-width: 3px; stroke: rgb(0,0,0);"></rect>
                <rect x="120" y="500" rx="10" ry="10" width="1120" height="250"
                       style="fill: rgb(255,255,255); z-index: 30; stroke-width: 3px; stroke: rgb(0,0,0);">
                    </rect>   
            <rect x="62.5%" y="500" height="800" width="700" rx="10" ry="10" 
                  style="z-index: 30; stroke-width:3px; stroke:rgb(0,0,0); fill:rgb(255,255,255)"></rect>
            <rect x="1647" y="600" height="250" width="600" rx="10 ry="10
                  style="z-index: 30; stroke-width:3px; stroke:rgb(0,0,0); fill:rgb(255,255,255)"></rect>
            <rect x="1647" y="870" height="250" width="600" rx="10 ry="10
                  style="z-index: 30; stroke-width:3px; stroke:rgb(0,0,0); fill:rgb(255,255,255)"></rect>
            
        </svg>
      </div>
   
  <img src="assets/logo.png" class="webLogo">
<img src="" alt="property logo" class="Plogo">
       <label id="pNameLabel"> <b>Property Name</b></label>
    <label id="pReviews">  x Reviews</label>
    <img src="assets/star.png" class="star2"> 
       <label id="stars"> y stars </label>
    <button type="submit" id="editBtn" >Edit</button>
     <button type="submit" id="delete" >Delete</button>
     <button type="submit" id="viewAll" >All Properties</button>
     <button type="submit" id="Add" >Add Property</button>
       <label id="latest"><b>Latest Reviews</b></label>
       <button type="submit" id="viewNotification">View All</button>
       <label id="notification1">notification1</label>
       <label id="notification2">notification2</label>
        <button type="submit" id="viewBC">Blockchain</button> -->

        <script>
          var firebaseConfig = {
            apiKey: "AIzaSyBVKHsqnVyaPbvPmgzPqEK_9p2Hm4ZucYc",
            authDomain: "trusted2020-8c803.firebaseapp.com",
            databaseURL: "https://trusted2020-8c803.firebaseio.com",
            projectId: "trusted2020-8c803",
            storageBucket: "trusted2020-8c803.appspot.com",
            messagingSenderId: "662663714362",
            appId: "1:662663714362:web:1842f051b9bddf5f48c703",
            measurementId: "G-QDZ39S220R"
          };
          // Initialize Firebase
          firebase.initializeApp(firebaseConfig);
          var uu = sessionStorage.getItem('userId22');
          
         if(uu!=null)
         {
            document.getElementById('signin').style.display='none';
            document.getElementById('signout').style.display='block';
         }else
         {
           
          document.getElementById('signin').style.display='block';
          document.getElementById('signout').style.display='none';
          window.location.href = "Login.html"
         }

         firebase.database().ref("Property").child(uu).once('value').then(function (snapshot){
          snapshot.forEach(function (property){
              var prpID=property.key;
              var prpName=property.val().PropertyName;
              var prpImage=property.val().Image;
              
              document.getElementById("prp-list").innerHTML+=
              '<div  class="single-prp">'+
                '<p>'+prpName+'</p>'+ 
                  '<div class="single-prp-inside">'+
                    '<img width="100" height="140" src="'+prpImage+'"/>'+
                    '<div class="vertical_div">'+
                      '<p class="text-inside">7,449 Reviews</p>'+
                      '<p class="text-inside">4,6 Stars</p>'+ 
                   ' </div>'+
                    
                    '<button onclick="editprp(\'' + prpID + '\')">Edite</button>'+
                    '<button onclick="deleteprp(\'' + prpID + '\')"">Delete</button>'+
                  '</div>'+
                '</div>'

                firebase.database().ref("Reviews").orderByChild('PID').equalTo(prpID).once('value').then(function (snapshot){
          snapshot.forEach(function (review){
            var ReviewTxt=review.val().Txt;
            var ReviewerID=review.val().UID;
            var ReviewDate=review.val().DateTime;
            firebase.database().ref("MEMBER").child(ReviewerID).child('FullName').once("value").then(function (usersnap){
              var ReviewerName=usersnap.val();

              document.getElementById('ReviewList').innerHTML+=
              '<div class="singleReviews">'+
                '<div style="display: flex;">'+
                  '<p class="text-inside" style=" font-weight: bold;">'+ReviewerName+'</p>'+
                  '<p class="text-inside">'+ReviewDate+'</p>'+
                '</div>'+
                '<p class="text-review">'+ReviewTxt+'</p>'+
                
              '</div>';

            })
           
            
          });
         });
          });
         });
        
        
          firebase.database().ref("MEMBER").child(uu).once('value').then(function (snapshot){
            var userName= snapshot.val().FullName;
            var emaill= snapshot.val().Email;
            
            //alert(userName)
           // alert(emaill)
            }
            );
     
         function addprp(){
          window.location.href = "AddProperty.html";
         }

         function editprp(PID){
          window.location.href = "EditeProperty.html?c="+PID;
         }
         function deleteprp(PID)
         {
          firebase.database().ref("Property").child(uu).child(PID).remove().then(function (){
            alert('Property deleted successfully.');
            location.reload();
            return false;
          });
         }
         function logout()
         {
          sessionStorage.removeItem('userId22');
          window.location.href = "HomePage2.html"
         }
        </script>
    </body> 
    
</html>